<script src="/socket.io/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script>
    $(function () {
        var socket = io();
        var areas;

        socket.on('server:areas', (data) => {
            var content = '';
            areas = data
            for (let i = 0; i < areas.length; i++) {
                content += ('<div class="card mb-3 my-2"><div class="card-header">' + areas[i].area + '</div><div class="card-body card bg-light" id=area' + i + '></div>');
            }
            $("#pnlProduccion").html(content);
        });

        socket.on('server:counters', function (counters) {
            for (let a = 0; a < areas.length; a++) {
                var content =
                    '<table table-condensed id=tblArea' + a + '>' +
                    '<thead>' +
                    '<tr>' +
                    '<th data-field="equipment">Equipo</th>' +
                    '<th data-field="total">Total Producido</th>' +
                    '<th data-field="turn">Total Turno</th>' +
                    '<th data-field="hour">Produccion Hora</th>' +
                    '<th data-field="speed">Velocidad</th>' +
                    '<th data-field="state">Estado Actual</th>' +
                    '</tr>' +
                    '</thead>';
                var rows = '<tbody>';
                for (let c = 0; c < counters.length; c++) {
                    if (areas[a].area == counters[c].area) {
                        rows += (
                            '<tr id=count' + counters[c].id + '>' +
                            '<td>' + counters[c].code + '</td>' +
                            '<td>' + counters[c].data.count.total + '</td>' +
                            '<td>' + counters[c].data.count.turn + '</td>' +
                            '<td>' + counters[c].data.count.hour + '</td>' +
                            '<td>' + counters[c].data.speed.machine + '</td>' +
                            '<td>' + counters[c].data.state.iest + '</td>' +
                            '</tr>'
                        );
                    }
                }
                content += (rows + '</tbody></table>');
                //console.log(content);
                $("#area" + a).html(content);
            }
        });

        socket.on('server:data', function (data) {
            console.log(data.html);
            $("#count" + data.id).html(data.html);
            /*$("#count" + data.id).find('td:eq(1)').html(data.count.total);
            $("#count" + data.id).find('td:eq(2)').html(data.count.hres);
            $("#count" + data.id).find('td:eq(3)').html(data.count.hour);
            $("#count" + data.id).find('td:eq(4)').html(data.speed.machine);
            $("#count" + data.id).find('td:eq(5)').html(data.state.iest);*/
        });
    });
</script>

<div class="container-fluid">
    <div id="pnlProduccion" class="my-2"></div>
</div>